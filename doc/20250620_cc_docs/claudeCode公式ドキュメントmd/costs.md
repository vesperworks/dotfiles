---
created: 2025-06-06T10:29
updated: 2025-06-12T18:40
---
# コストを効果的に管理する

> Claude Codeを使用する際のトークン使用量とコストを追跡および最適化する方法を学びます。

Claude Codeは各インタラクションでトークンを消費します。平均コストは1日あたり開発者1人につき約6ドルで、ユーザーの90%は1日のコストが12ドル未満に収まっています。

## コストを追跡する

* `/cost`を使用して現在のセッションの使用状況を確認
* **Anthropic Consoleユーザー**:
  * Anthropic Consoleで[過去の使用状況](https://support.anthropic.com/ja/articles/9534590-cost-and-usage-reporting-in-console)を確認（管理者または請求担当者ロールが必要）
  * Claude Codeワークスペースの[ワークスペース支出制限](https://support.anthropic.com/ja/articles/9796807-creating-and-managing-workspaces)を設定（管理者ロールが必要）
* **ProおよびMaxプランユーザー**: 使用量はサブスクリプションに含まれています

## トークン使用量を削減する

* **会話をコンパクトにする:**

  * Claudeはコンテキストが容量の95%を超えると、デフォルトで自動コンパクト機能を使用します
  * 自動コンパクトの切り替え: `/config`を実行し、「Auto-compact enabled」に移動
  * コンテキストが大きくなったら`/compact`を手動で使用
  * カスタム指示を追加: `/compact コードサンプルとAPI使用に焦点を当てる`
  * CLAUDE.mdに追加してコンパクト化をカスタマイズ:

    ```markdown
    # 要約の指示

    コンパクト機能を使用する際は、テスト出力とコード変更に焦点を当ててください
    ```

* **具体的なクエリを書く:** 不必要なスキャンを引き起こす曖昧なリクエストを避ける

* **複雑なタスクを分解する:** 大きなタスクを焦点を絞ったインタラクションに分割する

* **タスク間で履歴をクリアする:** `/clear`を使用してコンテキストをリセットする

コストは以下の要因によって大きく変わる可能性があります:

* 分析対象のコードベースのサイズ
* クエリの複雑さ
* 検索または変更されるファイルの数
* 会話履歴の長さ
* 会話をコンパクト化する頻度
* バックグラウンドプロセス（俳句生成、会話要約）

## バックグラウンドのトークン使用

Claude Codeはアイドル状態でも一部のバックグラウンド機能にトークンを使用します:

* **俳句生成**: 入力中に表示される小さな創造的なメッセージ（約1セント/日）
* **会話要約**: `claude --resume`機能のために以前の会話を要約するバックグラウンドジョブ
* **コマンド処理**: `/cost`などの一部のコマンドはステータスを確認するためにリクエストを生成する場合があります

これらのバックグラウンドプロセスは、アクティブなインタラクションがなくても少量のトークン（通常はセッションあたり0.04ドル未満）を消費します。

<Note>
  チーム導入の場合、より広範な展開の前に使用パターンを確立するために小さなパイロットグループから始めることをお勧めします。
</Note>

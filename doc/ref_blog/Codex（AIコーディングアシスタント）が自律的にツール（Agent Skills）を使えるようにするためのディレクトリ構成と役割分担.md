---
created: 2025-11-21 16:01
updated: 2025-11-21T16:02
---
[[2025-11-21]]

# Codex（AIコーディングアシスタント）が自律的にツール（Agent Skills）を使えるようにするためのディレクトリ構成と役割分担

[[CodexでもAgent Skillsを使いたい]]
---

### 1. 画像内容のテキスト化（Markdown）

画像内のディレクトリ構造と、それぞれの注釈をコードブロックとして再現します。

Markdown

```
# CodexでもAgent Skillsを使えるようにする
## Chrome DevToolsで「スクリーンショット撮影してUI調査をしたい」を実現するAgent Skillsの構成

skills-repo/
├── AGENTS.md                  # Codexに各Skillを自律的に選択するために使う
└── skills/
    ├── index.json             # SkillsのL1層
    ├── browser-devtools/      # browser-devtoolsのSkillに必要な全ファイル
    │   ├── SKILL.md           # L2層で読みこまれるSKILL.md
    │   ├── package.json
    │   ├── resources/
    │   │   └── cheatsheet.md
    │   └── scripts/
    │       ├── start.js
    │       ├── nav.js
    │       ├── eval.js
    │       └── screenshot.js
    └── video-downloader/
        └── SKILL.md
```

---

### 2. MECEな構成解説

このアーキテクチャは、「AIがスキルを認識し、実行するまでの流れ」を階層構造で管理しています。機能を**「認知・選択」「索引・定義」「実行・実体」**の3つのレイヤーに分けることで、システム全体をMECEに説明できます。

#### ① 認知・選択層（Orchestration Layer）

AIが「どのスキルを使うべきか」を判断するための最上位レイヤーです。

- **`AGENTS.md`**
    
    - **役割:** Codex（AI）へのインストラクション定義。
        
    - **機能:** 利用可能なスキルの概要をAIに伝え、ユーザーの要望（例：「UI調査したい」）に対して、どのスキル（例：`browser-devtools`）を選択すべきかを自律的に判断させるための判断基準を提供します。
        

#### ② 索引・定義層（Definition & Index Layer）

スキルの存在場所と、具体的な使い方を定義する中間レイヤーです。L1（一覧）とL2（詳細）に分かれています。

- **`skills/index.json` (L1層)**
    
    - **役割:** スキルのディレクトリ（目次）。
        
    - **機能:** システム内にどのようなスキルパッケージが存在しているかの一覧を管理します。ここがエントリポイントとなります。
        
- **`browser-devtools/SKILL.md` (L2層)**
    
    - **役割:** 個別スキルの取扱説明書。
        
    - **機能:** `index.json`から参照されます。AIに対して、このスキルが具体的に「どのようなコマンドを受け付けるか」「どう振る舞うか」という詳細なプロンプトや制約事項を定義します。
        

#### ③ 実行・実体層（Implementation Layer）

実際に処理を行うプログラムコードやリソースが含まれる最下層です。

- **`scripts/` (`start.js`, `screenshot.js` 等)**
    
    - **役割:** 実処理を行うスクリプト群。
        
    - **機能:** 具体的なタスク（ブラウザの起動、スクリーンショットの撮影、ページ遷移など）を実行するコードです。AIが直接これらを書くのではなく、AIの指示を受けて呼び出される機能群です。
        
- **`resources/` (`cheatsheet.md` 等)**
    
    - **役割:** 補助資料。
        
    - **機能:** AIやスクリプトが参照するためのリファレンスやデータです。
        
- **`package.json`**
    
    - **役割:** 依存関係管理。
        
    - **機能:** このスキルを動かすために必要な外部ライブラリ（npmパッケージなど）を定義します。
        

---

### まとめ：この構成のメリット

この構造は以下の通り役割が明確に分離されています。

1. **AIの頭脳 (`AGENTS.md`)**
    
2. **地図 (`index.json`)**
    
3. **マニュアル (`SKILL.md`)**
    
4. **道具 (`scripts/`)**
    

これにより、新しいスキル（例：`video-downloader`）を追加する際も、既存の構造を壊さずに拡張可能（Scalable）であり、かつ各ファイルが何を担当しているかが明確（Maintainable）になっています。

次のステップのご提案

この構成をご自身のプロジェクト（Codex CLI等）に適用するために、AGENTS.md や SKILL.md の具体的なテンプレート（書き方のサンプル）を作成しましょうか？
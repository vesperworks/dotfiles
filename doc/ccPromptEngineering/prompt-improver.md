# プロンプト改善ツールを使用してプロンプトを最適化する

---

<Note>
私たちのプロンプト改善ツールは、拡張思考機能を持つモデルを含む、すべてのClaudeモデルと互換性があります。拡張思考モデル固有のプロンプトのヒントについては、[こちら](/docs/ja/build-with-claude/extended-thinking)をご覧ください。
</Note>

プロンプト改善ツールは、自動化された分析と強化を通じて、プロンプトを迅速に反復し改善するのに役立ちます。高い精度を必要とする複雑なタスクに対してプロンプトをより堅牢にすることに優れています。

<Frame>
  ![Image](/docs/images/prompt_improver.png)
</Frame>

## 始める前に

以下が必要です：
- 改善する[プロンプトテンプレート](/docs/ja/build-with-claude/prompt-engineering/prompt-templates-and-variables)
- Claudeの現在の出力に関する問題のフィードバック（オプションですが推奨）
- 入力例と理想的な出力（オプションですが推奨）

## プロンプト改善ツールの仕組み

プロンプト改善ツールは4つのステップでプロンプトを強化します：

1. **例の識別**：プロンプトテンプレートから例を特定し抽出します
2. **初期ドラフト**：明確なセクションとXMLタグを持つ構造化されたテンプレートを作成します
3. **思考の連鎖の洗練**：詳細な推論指示を追加し洗練します
4. **例の強化**：新しい推論プロセスを実証するために例を更新します

改善モーダルでこれらのステップがリアルタイムで実行される様子を見ることができます。

## 得られるもの

プロンプト改善ツールは以下を含むテンプレートを生成します：
- Claudeの推論プロセスを導き、通常その性能を向上させる詳細な思考の連鎖指示
- 異なるコンポーネントを分離するためのXMLタグを使用した明確な組織化
- 入力から出力までのステップバイステップの推論を実証する標準化された例の形式
- Claudeの初期応答を導く戦略的なプリフィル

<Note>
例はWorkbench UIでは別々に表示されますが、実際のAPI呼び出しでは最初のユーザーメッセージの開始時に含まれます。「**\<\/\> Get Code**」をクリックして生の形式を表示するか、Examplesボックスを介して例を生テキストとして挿入してください。
</Note>

## プロンプト改善ツールの使用方法

1. プロンプトテンプレートを送信します
2. Claudeの現在の出力に関する問題についてのフィードバックを追加します（例：「要約が専門家の聴衆には基本的すぎる」）
3. 入力例と理想的な出力を含めます
4. 改善されたプロンプトを確認します

## テスト例の生成

まだ例がありませんか？私たちの[テストケースジェネレーター](/docs/ja/test-and-evaluate/eval-tool#creating-test-cases)を使用して：
1. サンプル入力を生成します
2. Claudeの応答を取得します
3. 理想的な出力に合わせて応答を編集します
4. 洗練された例をプロンプトに追加します

## プロンプト改善ツールを使用するタイミング

プロンプト改善ツールは以下に最適です：
- 詳細な推論を必要とする複雑なタスク
- 速度よりも精度が重要な状況
- Claudeの現在の出力に大幅な改善が必要な問題

<Note>
レイテンシやコストに敏感なアプリケーションの場合は、よりシンプルなプロンプトの使用を検討してください。プロンプト改善ツールは、より長く、より徹底的ですが、より遅い応答を生成するテンプレートを作成します。
</Note>

## 改善例

プロンプト改善ツールが基本的な分類プロンプトをどのように強化するかを示します：

<section title="元のプロンプト">

```
以下のWikipedia記事タイトルのリストから、この文がどの記事から来たかを特定してください。
記事タイトルのみで応答し、他には何も含めないでください。

記事タイトル：
{{titles}}

分類する文：
{{sentence}}
```

</section>

<section title="改善されたプロンプト">

```
あなたは、提供された記事タイトルのリストに基づいて、文をWikipedia記事タイトルにマッチングすることに特化したインテリジェントなテキスト分類システムです。あなたのタスクは、与えられた文が最も可能性の高いWikipedia記事を特定することです。

まず、以下のWikipedia記事タイトルのリストを確認してください：
<article_titles>
{{titles}}
</article_titles>

次に、分類が必要なこの文を考慮してください：
<sentence_to_classify>
{{sentence}}
</sentence_to_classify>

あなたの目標は、提供されたリストからどの記事タイトルが与えられた文に最も適合するかを決定することです。以下のステップに従ってください：

1. 文から主要な概念をリストアップします
2. 各主要概念を記事タイトルと比較します
3. 最も関連性の高い上位3つのタイトルをランク付けし、なぜそれらが関連性があるかを説明します
4. 文の内容を最もよく包含または関連する最も適切な記事タイトルを選択します

<analysis>タグで分析を囲んでください。以下を含めてください：
- 文からの主要概念のリスト
- 各主要概念と記事タイトルの比較
- 説明付きの最も関連性の高い上位3つのタイトルのランキング
- あなたの最終選択と推論

分析の後、最終回答を提供してください：リストから最も適切なWikipedia記事タイトル1つ。

選択した記事タイトルのみを出力し、追加のテキストや説明は含めないでください。
```

</section>

改善されたプロンプトがどのように：
- 明確なステップバイステップの推論指示を追加する
- コンテンツを整理するためにXMLタグを使用する
- 明示的な出力形式要件を提供する
- 分析プロセスを通じてClaudeを導く

ことに注目してください。

## トラブルシューティング

一般的な問題と解決策：

- **例が出力に表示されない**：例がXMLタグで適切にフォーマットされ、最初のユーザーメッセージの開始時に表示されることを確認してください
- **思考の連鎖が冗長すぎる**：望ましい出力の長さと詳細レベルについて具体的な指示を追加してください
- **推論ステップがニーズに合わない**：特定の使用ケースに合わせてステップセクションを変更してください

***

## 次のステップ

<CardGroup cols={3}>
  <Card title="プロンプトライブラリ" icon="link" href="/docs/ja/resources/prompt-library/library">
    さまざまなタスクの例プロンプトからインスピレーションを得る。
  </Card>
  <Card title="GitHubプロンプトチュートリアル" icon="link" href="https://github.com/anthropics/prompt-eng-interactive-tutorial">
    インタラクティブなチュートリアルでプロンプトのベストプラクティスを学ぶ。
  </Card>
  <Card title="プロンプトをテストする" icon="link" href="/docs/ja/test-and-evaluate/eval-tool">
    評価ツールを使用して改善されたプロンプトをテストする。
  </Card>
</CardGroup>
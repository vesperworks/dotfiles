# XMLタグを使用してプロンプトを構造化する

---

<Note>
While these tips apply broadly to all Claude models, you can find prompting tips specific to extended thinking models [here](/docs/en/build-with-claude/prompt-engineering/extended-thinking-tips).
</Note>

プロンプトにコンテキスト、指示、例などの複数のコンポーネントが含まれる場合、XMLタグは大きな違いを生み出します。これらはClaudeがプロンプトをより正確に解析するのに役立ち、より質の高い出力につながります。

<Tip>**XMLのヒント**: `<instructions>`、`<example>`、`<formatting>`などのタグを使用して、プロンプトの異なる部分を明確に区別します。これによりClaudeが指示と例やコンテキストを混同することを防ぎます。</Tip>

## なぜXMLタグを使用するのか？

- **明確さ:** プロンプトの異なる部分を明確に区別し、プロンプトが適切に構造化されていることを確認します。
- **正確性:** Claudeがプロンプトの部分を誤解釈することによるエラーを減らします。
- **柔軟性:** すべてを書き直すことなく、プロンプトの部分を簡単に見つけ、追加、削除、または修正できます。
- **解析可能性:** ClaudeにXMLタグを使用させることで、後処理によって応答の特定の部分を抽出しやすくなります。

<Note>Claudeが特に訓練されている「最適な」XMLタグは正式にはありませんが、タグ名が囲む情報と意味が通じるものを使用することをお勧めします。</Note>

***

## タグ付けのベストプラクティス

1. **一貫性を保つ**: プロンプト全体で同じタグ名を使用し、コンテンツについて言及する際にそれらのタグ名を参照します（例：`<contract>タグ内の契約書を使用して...`）。
2. **タグをネストする**: 階層的なコンテンツには`<outer><inner></inner></outer>`のようにタグをネストする必要があります。

<Tip>**パワーユーザーのヒント**: XMLタグをマルチショットプロンプティング（`<examples>`）や思考の連鎖（`<thinking>`、`<answer>`）などの他のテクニックと組み合わせます。これにより、超構造化された高性能なプロンプトが作成されます。</Tip>

### 例

  <section title="例：財務レポートの生成">

    XMLタグがない場合、Claudeはタスクを誤解し、必要な構造やトーンに合わないレポートを生成します。また、置換後に、Claudeが一つのセクション（Q1レポートの例など）がどこで終わり、別のセクションが始まるのかを誤解する可能性があります。

    | 役割 | XMLタグなし | XMLタグあり |
    | ---- | --- | --- |
    | ユーザー | あなたはAcmeCorpの財務アナリストです。投資家向けにQ2財務レポートを生成してください。昨年の例のように、収益成長、利益率、キャッシュフローのセクションを含めてください：\{\{Q1_REPORT\}\}。このスプレッドシートからデータポイントを使用してください：\{\{SPREADSHEET_DATA\}\}。レポートは非常に簡潔で、要点を押さえ、プロフェッショナルで、リスト形式である必要があります。また、強みと改善が必要な分野の両方を強調する必要があります。 | あなたはAcmeCorpの財務アナリストです。投資家向けにQ2財務レポートを生成してください。<br/><br/>AcmeCorpはB2B SaaS企業です。投資家は透明性と実行可能な洞察を重視しています。<br/><br/>このデータをレポートに使用してください：\<data>\{\{SPREADSHEET_DATA\}\}\</data><br/><br/>\<instructions><br/>1. 以下のセクションを含めてください：収益成長、利益率、キャッシュフロー<br/>2. 強みと改善が必要な分野を強調してください。<br/>\</instructions><br/><br/>簡潔でプロフェッショナルなトーンを使用してください。この構造に従ってください：<br/>\<formatting_example>\{\{Q1_REPORT\}\}\</formatting_example> |
    | アシスタント | AcmeCorp投資家向けQ2財務レポート<br/><br/>親愛なる投資家の皆様へ、<br/><br/>B2B SaaS市場におけるAmeCorpの継続的な成長と回復力を示すQ2財務レポートをご報告できることを嬉しく思います。<br/><br/>1. 収益成長：<br/>Q2の収益は15.2Mドルに達し、前年比22%増加しました。この成長は主にエンタープライズクライアントベースの30%拡大によるものです。ただし、SMBセグメントは5%の微減を記録し、Q3では標的を絞ったマーケティング施策で対応する予定です。<br/><br/>2. 利益率：<br/>インフラストラクチャの最適化により、粗利益率は72%（Q1から3%上昇）に改善しました。ただし、今後のAI駆動機能への大規模なR&D投資により、EBITDA利益率は18%（2%下落）に低下しました。<br/><br/>3. キャッシュフロー：<br/>営業キャッシュフローは4.1Mドルと引き続き堅調です。現在の消費率で15ヶ月分のランウェイを提供する28Mドルの現金準備があります。顧客獲得コストは20%増加しましたが、より効率的な販売戦略で対応しています。<br/><br/>まとめると、AmeCorpの基本的な財務状態は堅調です。成長への投資と慎重な現金管理のバランスを取っています。Q3の焦点はSMB成長の活性化と販売効率の最適化です。<br/><br/>引き続きのご信頼に感謝申し上げます。<br/><br/>敬具<br/>CFO、AcmeCorp | Q2 AcmeCorp投資家向け財務レポート\</output><br/><br/>収益成長：<br/>- Q2収益：15.2Mドル（前年比22%↑）<br/>- エンタープライズクライアント：30%↑<br/>- SMBセグメント：5%↓<br/>  対応策：Q3でターゲットマーケティング<br/><br/>利益率：<br/>- 粗利益率：72%（Q1から3%↑）<br/>  理由：インフラストラクチャの最適化<br/>- EBITDA利益率：18%（2%↓）<br/>  理由：AI機能へのR&D投資<br/><br/>キャッシュフロー：<br/>- 営業キャッシュフロー：4.1Mドル（堅調）<br/>- 現金準備：28Mドル（15ヶ月分のランウェイ）<br/>- 顧客獲得コスト：20%↑<br/>  対応策：販売戦略の最適化<br/><br/>見通し：<br/>- 基本的財務状態：堅調<br/>- Q3の焦点：SMB活性化、販売最適化<br/><br/>経営陣は成長への投資と財務規律のバランスを維持することに引き続き注力しています。 |
  
</section>
  <section title="例：法的契約書の分析">

    XMLタグがない場合、Claudeの分析は整理されておらず、重要なポイントを見落とします。タグを使用すると、法務チームが行動を起こせる、構造化された徹底的な分析を提供します。

    | 役割 | XMLタグなし | XMLタグあり |
    | ---- | --- | --- |
    | ユーザー | このソフトウェアライセンス契約書の潜在的なリスクと責任について分析してください：\{\{CONTRACT\}\}。補償、責任制限、知的財産権の所有権条項に焦点を当ててください。また、異常または懸念される条項も指摘してください。参考として当社の標準契約書があります：\{\{STANDARD_CONTRACT\}\}。法務チーム向けに調査結果と推奨事項をまとめてください。 | このソフトウェアライセンス契約書の法的リスクと責任について分析してください。<br/><br/>当社は、コアデータインフラストラクチャにこの契約を検討している多国籍企業です。<br/><br/>\<agreement><br/>\{\{CONTRACT\}\}\</agreement><br/><br/>参考として当社の標準契約書です：<br/>\<standard_contract>\{\{STANDARD_CONTRACT\}\}\</standard_contract><br/><br/>\<instructions><br/>1. 以下の条項を分析してください：<br/>   - 補償<br/>   - 責任制限<br/>   - 知的財産権の所有権<br/><br/>2. 異常または懸念される条項を指摘してください。<br/><br/>3. 当社の標準契約書と比較してください。<br/><br/>4. 調査結果を\<findings>タグ内にまとめてください。<br/><br/>5. 実行可能な推奨事項を\<recommendations>タグ内にリストアップしてください。\</instructions> |
    | アシスタント | 提供されたソフトウェアライセンス契約書にはいくつかの懸念すべき点があります。補償条項は広範すぎ、重大な責任にさらされる可能性があります。責任制限条項では損害賠償額の上限がわずか500ドルで、エンタープライズレベルの使用には不適切です。知的財産権に関しては、当社が作成する修正や統合に対してベンダーに共同所有権を付与しています。<br/><br/>まとめると、この契約は当社の利益にはなりません。不当なリスクにさらされ、障害が発生した場合の救済手段が制限され、知的財産権が損なわれます。これらの条件の再交渉または代替ベンダーの検討を推奨します。 | \<findings><br/>1. 補償（第8条）：<br/>   - 問題点：範囲が広すぎる。当社の使用から生じる「あらゆる請求」に対して補償する必要がある。<br/>   - リスク：ベンダーの過失や製品の欠陥の場合でも責任を負う可能性がある。<br/>   - 逸脱：当社の標準では、契約違反から生じる請求に補償を制限している。<br/><br/>2. 責任制限（第9条）：<br/>   - 問題点：直接損害を含むすべての損害賠償額の上限が500ドル。<br/>   - リスク：エンタープライズ使用には著しく不適切。重大な障害は数百万ドルのコストになる可能性がある。<br/>   - 逸脱：当社の標準では、支払済み料金の12ヶ月分まで直接損害を認めている。<br/><br/>3. 知的財産権の所有権（第12条）：<br/>   - 問題点：当社の修正/統合にベンダーの共同所有権を付与する。<br/>   - リスク：ベンダーが当社の独自のアルゴリズムやデータの洞察を使用または販売する可能性がある。<br/>   - 逸脱：当社の標準では、当社の成果物の完全な所有権を保持する。<br/><br/>4. 異常な条項：<br/>   - 第5.3条：ベンダーは当社の使用データを「あらゆる目的で」使用可能。<br/>   - 第7.2条：ベンダーは7日前の通知のみで「便宜上」解約可能。<br/>   - 第11条：基本的な商品性の保証さえも含まない。<br/>\</findings><br/><br/>\<recommendations><br/>1. この契約を拒否する。エンタープライズにとってリスクが利点を大きく上回る。<br/>2. 対案を提示：<br/>   - 補償：契約違反から生じる請求に制限する。<br/>   - 責任：直接損害は12ヶ月分の料金を上限とし、間接損害について交渉する。<br/>   - 知的財産権：当社の修正/統合の完全な所有権。<br/>   - データ使用：サービス改善のみに制限する。<br/>   - 解約：最低90日前の通知、正当な理由がある場合のみ。<br/>   - 保証：基本的な商品性と目的適合性を要求する。<br/>3. ベンダーが拒否した場合、代替プロバイダーまたは社内ソリューションを検討する。<br/>4. リスクが高いため、契約交渉に法務顧問を関与させる。<br/>\</recommendations> |
  
</section>

***

<CardGroup cols={3}>
  <Card title="プロンプトライブラリ" icon="link" href="/docs/ja/resources/prompt-library/library">
    様々なタスクやユースケース向けの厳選されたプロンプトで着想を得ましょう。
  </Card>
  <Card title="GitHubプロンプティングチュートリアル" icon="link" href="https://github.com/anthropics/prompt-eng-interactive-tutorial">
    当社のドキュメントに記載されているプロンプトエンジニアリングの概念をカバーする、例が豊富なチュートリアルです。
  </Card>
  <Card title="Google Sheetsプロンプティングチュートリアル" icon="link" href="https://docs.google.com/spreadsheets/d/19jzLgRruG9kjUQNKtCg1ZjdD6l6weA6qRXG5zLIAhC8">
    インタラクティブなスプレッドシートを通じた、より軽量版のプロンプトエンジニアリングチュートリアルです。
  </Card>
</CardGroup>
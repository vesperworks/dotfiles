# TODO: マルチエージェントワークフロー実装の残タスク

更新日: 2025-06-26（todo.md整理 - 並列実行を低優先度へ移動）

## 🔴 最優先度タスク（即座に実施）

### 残存worktreeのクリーンアップ [推定: 0.5時間]
- [ ] 4つの残存worktree（feature-user-auth、refactor-logging、tdd-auth-jwt、tdd-multi-tdd）を削除
- [ ] クリーンアップ機能の動作確認

### CLAUDE.mdの軽微な更新 [推定: 0.5時間]
- [ ] test-worktree-access.shの正しい配置場所（.claude/test/）を反映
- [ ] 新しいコマンド（p.md、t.md）をプロジェクト構造に追加

## 🟠 高優先度タスク（1週間以内）

### 全multiコマンドの統合テスト [推定: 4-6時間]
- [ ] 各コマンドで実際のタスクを実行
- [ ] エラーハンドリングの動作確認
- [ ] 並行実行時の動作検証
- **依存**: 環境ファイル管理の改善完了後

### テストスクリプトの作成 [推定: 2-3時間]
- [ ] test-multi-agent.shの作成（.claude/test/配下）
- [ ] test-parallel-tdd.shの作成（.claude/test/配下）
- [ ] 基本的な動作確認テストの実装

### multi-feature.md改善（XMLタグ構造導入） [推定: 2-3時間]
- [ ] **XMLタグ構造の導入**
  - [ ] `<feature_development_workflow>`でワークフロー全体を囲む
  - [ ] 各フェーズを`<phase name="explore">`等でマークアップ
  - [ ] `<objectives>`, `<tools>`, `<output>`で各フェーズ内容を構造化
  - [ ] `<quality_gates>`で品質基準を明確化
- [ ] **強調語の体系的使用**
  - [ ] `ALWAYS`: 必須のコミット、テスト実行に使用
  - [ ] `NEVER`: 未テストのコミット、main直接編集の禁止に使用
  - [ ] `MUST`: ファイル作成前の確認、品質ゲート通過に使用
  - [ ] `IMPORTANT`: 重要な注意事項に限定使用

## 🟡 中優先度タスク（1ヶ月以内）

### 各ワークフローの自動テストスクリプト作成 [推定: 6-8時間]
- [ ] multi-tdd.shの統合テストスクリプト
- [ ] multi-feature.shの統合テストスクリプト
- [ ] multi-refactor.shの統合テストスクリプト
- [ ] CI/CDパイプラインへの統合準備
- **依存**: 全multiコマンドの統合テスト完了後

### ドキュメント整備 [推定: 4-5時間]
- [ ] トラブルシューティングガイド
- [ ] ベストプラクティス集
- [ ] CLAUDE.mdのプロジェクト構造更新
- [ ] ユーザーガイドの作成

### エラーハンドリング強化 [推定: 5-6時間]
- [ ] worktree作成失敗時のリトライ機能
- [ ] ネットワークエラー時の対処
- [ ] 不完全なタスクのリカバリー機能
- [ ] エラーログの構造化と分析機能

## 🟢 低優先度タスク（将来実装）

### MCP連携機能の実装 [推定: 10-15時間]
- [ ] Context7連携の具体的な実装
- [ ] Playwright/Puppeteer統合のサンプル作成
- [ ] MCP設定ドキュメントの作成
- [ ] 外部ツール連携のベストプラクティス

### 監視・ログ機能 [推定: 8-10時間]
- [ ] タスク実行履歴の記録
- [ ] パフォーマンスメトリクスの収集
- [ ] 成功/失敗率の可視化
- [ ] ダッシュボード機能の実装

### 設定のカスタマイズ [推定: 4-6時間]
- [ ] `.claude/config.json` - ユーザー設定ファイル
- [ ] タイムアウト値の調整機能
- [ ] デフォルトブランチ名のカスタマイズ
- [ ] プロジェクト別設定のサポート

### TDDサイクルの並列化による効率化 [推定: 6-8時間]
- [ ] Testerエージェントの早期投入
- [ ] MCP連携の専門化
- [ ] 効果測定（運用後実施予定）

### 並列TDD機能のコマンド統合 [推定: 3-4時間]
- [ ] multi-tdd.mdに`--parallel`オプションを追加
- [ ] オプション指定時に`run_parallel_agents()`を呼び出す
- [ ] デフォルトは従来の順次実行を維持
- [ ] 使用例とパフォーマンス比較をドキュメント化

## 📋 実施順序サマリー

### 完了済みタスク（2025-06-26 更新）
✅ 全multiコマンドのセッション分離問題修正
✅ 環境ファイル管理の改善（セキュリティ・並行実行対応）
✅ 修正フェーズ3: 検証とテスト（基本動作確認完了）
✅ test-worktree-access.shの作成完了（.claude/test/配下）

### 今週の実施計画
1. **Day 1**: 残存worktreeクリーンアップ、CLAUDE.md更新（🔴最優先）
2. **Day 2-3**: 全multiコマンドの統合テスト（🟠高優先）
3. **Day 3-4**: テストスクリプトの作成（🟠高優先）
4. **Day 5-6**: multi-feature.md改善（🟠高優先）
5. **Day 7**: 各ワークフローの自動テストスクリプト作成開始（🟡中優先）

### 重要な依存関係
- 統合テストは環境ファイル管理改善の完了により実施可能
- 自動テストスクリプトは統合テスト完了後に実施
- ドキュメント整備は各機能の実装・テスト完了後に実施

